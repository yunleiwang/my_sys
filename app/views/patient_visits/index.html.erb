
<div class="breadcrumbs" id="breadcrumbs">
  <script type="text/javascript">
      try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
  </script>

  <ul class="breadcrumb">
    <li>
      <i class="icon-home home-icon"></i>
      <a href="/home/index">主页</a>
    </li>

    <li>
      <a href="/patient_visits">就诊管理</a>
    </li>
    <li class="active">就诊列表</li>
  </ul><!-- .breadcrumb -->

  <div class="nav-search" id="nav-search">
    <form class="form-search">
        <span class="input-icon">
            <input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
            <i class="icon-search nav-search-icon"></i>
        </span>
    </form>
  </div><!-- #nav-search -->
</div>

<div class="page-content">
  <div class="row">
    <div class="col-xs-12">
      <div class="table-header">
        患者信息－列表
      </div>
      <div class="table-responsive">
        <table id="sample-table" class="table table-striped table-bordered table-hover">
          <thead>
          <tr>
            <th class="center">
              <label>
                <input type="checkbox" class="ace" />
                <span class="lbl"></span>
              </label>
            </th>
            <th>患者ID</th>
            <th>住院号</th>
            <th>姓名</th>
            <th>就诊内容</th>
            <th>
              <i class="icon-time bigger-110 hidden-480"></i>
              最后操作时间
            </th>
            <th>操作</th>
          </tr>
          </thead>

          <tbody>
          <% @patient_visits.each do |patient_visit| %>
              <tr>
                <td class="center">
                  <label>
                    <input type="checkbox" class="ace" />
                    <span class="lbl"></span>
                  </label>
                </td>

                <td>
                  <a href="#"><%= patient_visit.patient.file_number %></a>
                </td>
                <td><%= patient_visit.admission_number %></td>
                <td class="hidden-480"><%= patient_visit.patient.name %></td>
                <td>A,B,C</td>
                <td><%= patient_visit.updated_at.localtime.to_s(:db) %></td>
                <td>
                  <div class="visible-md visible-lg hidden-sm hidden-xs action-buttons">
                    <%#= link_to content_tag(:i, nil, :class=>"icon-edit bigger-130"), {:controller => :item_form_metaelements, :action => :new, :menu_type=>2, :patient_visit_id=>patient_visit.id}, :class=>"green", :target=>'blank', :title => '添加详细档案' %>
                    <%#= link_to content_tag(:i, nil, :class=>"icon-book bigger-130"), {:controller => :item_form_metaelements, :action => :new, :menu_type=>3, :patient_visit_id=>patient_visit.id}, :class=>"green", :target=>'blank', :title => '添加简易档案' %>
                    <%= link_to content_tag(:i, nil, :class=>"icon-edit bigger-130"), {:action => :show, :id=>patient_visit.id, :menu_type=>2, :patient_visit_id=>patient_visit.id}, :class=>"green", :target=>'blank', :title => '添加详细档案' %>
                    <%= link_to content_tag(:i, nil, :class=>"icon-book bigger-130"), { :action => :show, :id=>patient_visit.id,:menu_type=>3, :patient_visit_id=>patient_visit.id}, :class=>"green", :target=>'blank', :title => '添加简易档案' %>
                    <%= link_to content_tag(:i, nil, :class=>"icon-zoom-in bigger-130"), patient_visit, :class=>"blue" %>
                    <%= link_to content_tag(:i, nil, :class=>"icon-pencil bigger-130"), edit_patient_visit_path(patient_visit), :class=>"green" %>
                    <%= link_to content_tag(:i, nil, :class=>"icon-trash bigger-130"), patient_visit, {method: :delete, data: { confirm: 'Are you sure?' }, :class=>"red"} %>
                  </div>
                </td>
              </tr>
          <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <!-- PAGE CONTENT ENDS -->
</div><!-- /.col -->
</div><!-- /.row -->
</div><!-- /.page-content -->

<script type="text/javascript">

    jQuery(function($) {
        var oTable1 = $('#sample-table').dataTable( {
            "aoColumns": [
                { "bSortable": false },
                null, null, null, null, null,
                { "bSortable": false }
            ],
            "oLanguage": {
                "sLengthMenu": "每页显示 _MENU_ 条记录",
                "sZeroRecords": "抱歉， 没有找到",
                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                "sInfoEmpty": "没有数据",
                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                "sSearch": "搜索",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "前一页",
                    "sNext": "后一页",
                    "sLast": "尾页"
                },
                "sZeroRecords": "没有检索到数据",
                "sProcessing": "<img src='./loading.gif' />"
            }

        });

        $('table th input:checkbox').on('click' , function(){
            var that = this;
            $(this).closest('table').find('tr > td:first-child input:checkbox')
                    .each(function(){
                        this.checked = that.checked;
                        $(this).closest('tr').toggleClass('selected');
                    });

        });
    })
</script>